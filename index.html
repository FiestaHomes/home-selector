<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Fiesta Homes Finder</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f6f8fa;
      margin: 0;
      padding: 20px;
    }
    h1 {
      text-align: center;
    }
    .filters {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      justify-content: center;
      margin-bottom: 20px;
    }
    input[type="number"] {
      padding: 8px;
      border: 1px solid #ccc;
      border-radius: 6px;
      width: 130px;
    }
    button {
      padding: 10px 20px;
      background: #007bff;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }
    button:hover {
      background: #0056b3;
    }
    .home-card {
      background: white;
      border-radius: 10px;
      padding: 15px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      margin-bottom: 10px;
      max-width: 400px;
      margin: 10px auto;
    }
    .home-card h3 {
      margin: 0 0 5px;
    }
    .checkboxes {
      text-align: center;
      margin-bottom: 20px;
    }
    .checkboxes label {
      margin-right: 15px;
    }
  </style>
</head>
<body>
  <h1>Fiesta Homes Finder</h1>

  <div class="filters">
    <input type="number" id="bedrooms" placeholder="Bedrooms">
    <input type="number" id="bathrooms" placeholder="Bathrooms">
    <input type="number" id="minPayment" placeholder="Min Payment">
    <input type="number" id="maxPayment" placeholder="Max Payment">
    <button onclick="filterHomes()">Filter</button>
    <button onclick="resetFilters()">Reset</button>
  </div>

  <div class="checkboxes">
    <label><input type="radio" name="placement" id="park" value="400" onchange="filterHomes()"> Park (+$400)</label>
    <label><input type="radio" name="placement" id="land" value="800" onchange="filterHomes()"> Land (+$800)</label>
    <label><input type="checkbox" id="taxes" value="300" onchange="filterHomes()"> Property Taxes & Insurance (+$300)</label>
  </div>

  <div id="results"></div>

  <script>
    let homes = [];

    // Load homes from JSON
    fetch('homes.json')
      .then(response => response.json())
      .then(data => {
        homes = data;
        displayHomes(homes);
      })
      .catch(error => console.error('Error loading homes:', error));

    function filterHomes() {
      const beds = parseInt(document.getElementById('bedrooms').value) || null;
      const baths = parseInt(document.getElementById('bathrooms').value) || null;
      let minPayment = parseInt(document.getElementById('minPayment').value) || 0;
      let maxPayment = parseInt(document.getElementById('maxPayment').value) || Infinity;

      // Add-ons
      const parkAdd = document.getElementById('park').checked ? 400 : 0;
      const landAdd = document.getElementById('land').checked ? 800 : 0;
      const taxesAdd = document.getElementById('taxes').checked ? 300 : 0;

      minPayment += parkAdd + landAdd + taxesAdd;
      maxPayment += parkAdd + landAdd + taxesAdd;

      const filtered = homes.filter(h => {
        const matchBeds = !beds || h.bedrooms === beds;
        const matchBaths = !baths || h.bathrooms === baths;

        const [homeMin, homeMax] = h.payment.split('-').map(x => parseInt(x.trim()));
        const matchPayment = homeMin >= minPayment && homeMax <= maxPayment;

        return matchBeds && matchBaths && matchPayment;
      });

      displayHomes(filtered);
    }

    function displayHomes(list) {
      const results = document.getElementById('results');
      results.innerHTML = '';

      if (list.length === 0) {
        results.innerHTML = '<p>No homes found within the specified range.</p>';
        return;
      }

      list.sort((a, b) => a.price - b.price);

      list.forEach(h => {
        const div = document.createElement('div');
        div.classList.add('home-card');
        div.innerHTML = `
          <h3>Home #${h.number}</h3>
          <p><strong>B-B:</strong> ${h.bedrooms}-${h.bathrooms}</p>
          <p><strong>Payment:</strong> ${h.payment}</p>
          <p><strong>Price:</strong> $${h.price.toLocaleString()}</p>
          <p><strong>Size:</strong> ${h.size || 'N/A'}</p>
          <button onclick="alert('Contact Fiesta Homes for info on Home #${h.number}')">Contact for Info</button>
        `;
        results.appendChild(div);
      });
    }

    function resetFilters() {
      document.getElementById('bedrooms').value = '';
      document.getElementById('bathrooms').value = '';
      document.getElementById('minPayment').value = '';
      document.getElementById('maxPayment').value = '';
      document.getElementById('park').checked = false;
      document.getElementById('land').checked = false;
      document.getElementById('taxes').checked = false;
      displayHomes(homes);
    }
  </script>
</body>
</html>
